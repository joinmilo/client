<div class="details">
  <app-title-image [image]="titleImage"></app-title-image>
  <section>
    <app-share-button>
    </app-share-button>

    <app-favorite-piece>
    </app-favorite-piece>

    <app-category-piece
      [category]="event?.category"
      [url]="['/portal', url]"
      [queryParam]="queryParams">
    </app-category-piece>
  </section>
  <section>
    <h2 class="mat-headline-4">
      {{event | translatable: 'name' | async}}
    </h2>

    <section>
      <p [innerHtml]="event | translatable: 'shortDescription' | async"></p>

      <app-event-details-summary>
      </app-event-details-summary>

      <p [innerHtml]="event | translatable : 'content' | async"></p>
    </section>

    <app-event-details-organisation *ngIf="event?.organisation">
    </app-event-details-organisation>

    <app-media-slider *ngIf="media && media.length > 0" 
      [media]="media" [link]="['./media']"
      [titleType]="'details-title'">
    </app-media-slider>

    <app-event-participants>
    </app-event-participants>

    <app-rating [currentUser]="currentUser"
      [ratingDto]="event?.calculatedRatings"
      (content)="saveComment($event)"
      (rating)="saveRating($event)"
      [currentRatingScore]="(event?.ratings | filter: {userContext: {id: currentUser?.id}})?.[0]?.score">
    </app-rating>

    <app-comment 
     *ngIf="event?.lastComment?.id"
     [content]="event?.lastComment?.content"
     [created]="event?.lastComment?.created"
     [userContext]="event?.lastComment?.userContext"
     >
    </app-comment>

    <div>
      <app-save-comment (content)="saveComment($event)"></app-save-comment>
      <a [routerLink]="['./comments']" appLabel="allComments" suffix="Â»"></a>
    </div>
  </section>
</div>