import {Component, Input} from '@angular/core';
import {defaultMarkerColor, MarkerIconKeys} from '../constants/map.constants';


@Component({
  styles: [`
    :host {
      position: relative;
      width: 28px;
      height: 40px;

      svg {
        display: block;
      }

      svg:nth-child(2) {
        position: absolute;
        top: 8px;
        left: 0;
        right: 0;
        margin: 0 auto;
      }
    }
  `],
  template: `
    <div>
      <svg width="28" height="40" viewBox="0 0 28 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path [attr.fill]="fill" [attr.stroke]="stroke" stroke-width="0.75"
          d="M14.0801 39.6637C13.9797 39.5498 13.8406 39.3908 13.6679 39.1903C13.2865 38.7476 12.7412 38.103 12.0867 37.2966C10.7774 35.6833 9.03212 33.4238 7.28732 30.8377C5.54204 28.251 3.80035 25.3421 2.49573 22.43C1.18965 19.5146 0.33008 16.6145 0.33008 14.04C0.33008 6.43811 6.47815 0.290034 14.0801 0.290034C21.682 0.290034 27.8301 6.43811 27.8301 14.04C27.8301 16.6145 26.9705 19.5146 25.6644 22.43C24.3598 25.3421 22.6181 28.251 20.8728 30.8377C19.128 33.4238 17.3827 35.6833 16.0735 37.2966C15.4189 38.103 14.8737 38.7476 14.4922 39.1903C14.3196 39.3908 14.1805 39.5498 14.0801 39.6637Z"/>
      </svg>
      <svg *ngIf="icon === Icons.fitness" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="white" stroke="#8E0000" stroke-width="0.25" d="M13.6251 7.91159L11.3335 10.2032L5.79694 4.66665L8.08855 2.37503L8.17694 2.28665L8.08855 2.19826L7.13522 1.24492L7.04683 1.15654L6.95844 1.24492L6.0935 2.10987L5.22855 1.24492L5.14016 1.15654L5.05177 1.24492L3.7135 2.5832L2.84855 1.71826L2.76016 1.62987L2.67177 1.71826L1.71844 2.67159L1.63005 2.75998L1.71844 2.84837L2.58339 3.71331L1.24511 5.05159L1.15672 5.13998L1.24511 5.22837L2.11005 6.09331L1.24511 6.95826L1.15672 7.04665L1.24511 7.13503L2.19844 8.08837L2.28683 8.17676L2.37522 8.08837L4.66683 5.79676L10.2034 11.3333L7.91177 13.6249L7.82339 13.7133L7.91177 13.8017L8.86511 14.755L8.9535 14.8434L9.04188 14.755L9.90683 13.8901L10.7718 14.755L10.8602 14.8434L10.9486 14.755L12.2868 13.4168L13.1518 14.2817L13.2402 14.3701L13.3286 14.2817L14.2819 13.3284L14.3703 13.24L14.2819 13.1516L13.4169 12.2866L14.7552 10.9484L14.8436 10.86L14.7552 10.7716L13.8903 9.90665L14.7552 9.0417L14.8436 8.95331L14.7552 8.86492L13.8019 7.91159L13.7135 7.8232L13.6251 7.91159Z"/></svg>
      <svg *ngIf="icon === Icons.school" width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="white" stroke="#BA7200" stroke-width="0.25" d="M8.05969 0.890263L7.99984 0.857614L7.93998 0.890263L0.606647 4.89026L0.405379 5.00005L0.606686 5.10976L3.20817 6.52757V10.4533V10.5275L3.27329 10.5631L7.93996 13.1097L7.99984 13.1424L8.05972 13.1097L12.7264 10.5631L12.7915 10.5275V10.4533V6.52757L13.8748 5.93715V10.3333V10.4583H13.9998H15.3332H15.4582V10.3333V5V4.9258L15.393 4.89026L8.05969 0.890263ZM4.7915 9.58583V7.39067L7.93993 9.10971L7.99984 9.14242L8.05974 9.10971L11.2082 7.39067V9.58583L7.99984 11.3376L4.7915 9.58583ZM7.99984 2.66239L12.2855 5L7.99984 7.33761L3.71421 5L7.99984 2.66239Z"/></svg>
      <svg *ngIf="icon === Icons.music" width="10" height="14" viewBox="0 0 10 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="white" stroke="#007AB1" stroke-width="0.25" d="M5 0.875H4.87488L4.875 1.00012L4.88147 7.82549C4.51672 7.64816 4.10821 7.54167 3.67333 7.54167C2.1245 7.54167 0.875 8.79076 0.875 10.3333C0.875 11.8759 2.1245 13.125 3.67333 13.125C5.22298 13.125 6.45833 11.8751 6.45833 10.3333V3.79167H9H9.125V3.66667V1V0.875H9H5ZM3.67333 11.5417C3.00904 11.5417 2.465 10.9976 2.465 10.3333C2.465 9.66904 3.00904 9.125 3.67333 9.125C4.33763 9.125 4.88167 9.66904 4.88167 10.3333C4.88167 10.9976 4.33763 11.5417 3.67333 11.5417Z"/></svg>
      <svg *ngIf="icon === Icons.restaurant" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.54167 8.33331V8.45831H9.66667H11.5417V13.6666V13.7916H11.6667H13H13.125V13.6666V0.333313V0.208313H13C12.0462 0.208313 11.1847 0.595071 10.5617 1.13196C9.9422 1.66592 9.54167 2.36423 9.54167 2.99998V8.33331ZM6.20833 0.333313V4.87498H5.125V0.333313V0.208313H5H3.66667H3.54167V0.333313V4.87498H2.45833V0.333313V0.208313H2.33333H1H0.875V0.333313V4.99998C0.875 6.50046 2.05736 7.72357 3.54167 7.7889V13.6666V13.7916H3.66667H5H5.125V13.6666V7.7889C6.60931 7.72357 7.79167 6.50046 7.79167 4.99998V0.333313V0.208313H7.66667H6.33333H6.20833V0.333313Z" fill="white" stroke="#6C9813" stroke-width="0.25"/></svg>
    </div>
  `
})
export class MarkerComponent {

  public Icons: typeof  MarkerIconKeys = MarkerIconKeys;

  fill = '';
  stroke = '';

  @Input()
  set color(color: string) {
    this.fill = color || defaultMarkerColor;
    this.stroke = this.darkenColor(this.fill);
  }

  @Input()
  icon = '';

  private darkenColor(hex: string, amount = 0x333333) {
    const numeric = Math.max((Number(`0xF${hex.substring(1, 7)}`) - amount), 0xF000000)
      .toString(16)
      .substring(1)
      .toUpperCase();
    return  `#${numeric}`;
  }
}
