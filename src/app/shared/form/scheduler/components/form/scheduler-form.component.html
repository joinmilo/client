<form [formGroup]="form">
  <app-row>
    <mat-form-field appearance="outline">
      <mat-label appLabel="begin"></mat-label>
      <input matInput type="datetime-local" formControlName="startDate">
    </mat-form-field>
  
    <mat-form-field appearance="outline">
      <mat-label appLabel="end"></mat-label>
      <input matInput type="datetime-local" formControlName="endDate">
    </mat-form-field>
  </app-row>
  
  <mat-divider></mat-divider>
  
  <app-row [columns]="2">
    <mat-form-field appearance="outline">
      <mat-label appLabel="recurrence"></mat-label>
      <mat-select formControlName="recurrence">
        <mat-option *ngFor="let recurrence of recurrences" [value]="recurrence">
          <span [appLabel]="recurrence"></span>
        </mat-option>
      </mat-select>
    </mat-form-field>
  </app-row>

  <ng-container *ngIf="form.value.recurrence
    && form.value.recurrence !== 'noRecurrence'">

    <app-row [columns]="recurrenceColumns">
      <span appLabel="repeatEvery"
        [appAssignColumns]="recurrenceLabelColumns">
      </span>

      <mat-form-field appearance="outline"
        [appAssignColumns]="recurrenceNumberColumns">
        <mat-label [appLabel]="everyRecurrenceLabel"></mat-label>
        <input matInput type="number" formControlName="recurrenceRepetitions">
      </mat-form-field>
    </app-row>
  
  
    <!-- TODO: Make possible to select never to end -->
    <section>
      <strong appLabel="Ende"></strong>
  
      <app-row [columns]="recurrenceColumns">
        <app-radio-button
          formControlName="recurrenceEnd"
          [input]="recurrenceEndOn"
          [value]="form.value.recurrenceEnd"
          [appAssignColumns]="recurrenceLabelColumns">
        </app-radio-button>
        <mat-form-field appearance="outline" [appAssignColumns]="recurrenceDateColumns">
          <mat-label appLabel="endRecurrence"></mat-label>
          <input matInput [matDatepicker]="picker" formControlName="recurrenceEndOn">
          <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </app-row>
  
      <app-row [columns]="recurrenceColumns">
        <app-radio-button
          formControlName="recurrenceEnd"
          [input]="recurrenceEndAfter"
          [value]="form.value.recurrenceEnd"
          [appAssignColumns]="recurrenceLabelColumns">
        </app-radio-button>
        <mat-form-field appearance="outline"
          [appAssignColumns]="recurrenceNumberColumns">
          <mat-label appLabel="times"></mat-label>
          <input matInput type="number" formControlName="recurrenceEndAfter">
        </mat-form-field>
      </app-row>
    </section>

  </ng-container>

  <mat-error *ngIf="form.errors">
    <span *ngFor="let error of form.errors | keyvalue"
      [appLabel]="error.key">
    </span>
  </mat-error>
</form>