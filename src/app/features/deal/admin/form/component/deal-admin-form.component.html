<app-page-title
  [titleLabel]="contentForm.value.id ? 'editDeal' : 'createNewDeal'">
</app-page-title>

<app-form-stepper (cancelled)="cancelled()" (saved)="saved()">
  <app-form-step titleLabel="content" [formGroup]="contentForm">
    <app-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label appLabel="name"></mat-label>
        <input matInput formControlName="name" />
      </mat-form-field>
    </app-row>

    <app-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label appLabel="category"></mat-label>
        <mat-select formControlName="categoryId">
          <mat-option
            [value]="category.id"
            *ngFor="let category of categories | async">
            <span>{{ category | translatable : "name" | async }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </app-row>

    <app-row columns="1">
      <cin-richtext-editor-form formControlName="content">
      </cin-richtext-editor-form>
    </app-row>
  </app-form-step>

  <app-form-step titleLabel="media" [formGroup]="uploadsForm">
    <app-media-form
      [cardToggle]="true"
      [titleToggle]="true"
      formControlName="uploads">
    </app-media-form>
  </app-form-step>

  <app-form-step titleLabel="contact" [formGroup]="contactForm" descriptionLabel="enterYourContactData">
    <app-row>
      <app-contact-form 
        formControlName="contact" 
        [showContactOptions]="false">
      </app-contact-form>
    </app-row>
  </app-form-step>

  <app-form-step [formGroup]="locationForm" titleLabel="location">
    <app-row>
      <app-address-form formControlName="address"> </app-address-form>
    </app-row>
  </app-form-step>

  <app-form-step
    titleLabel="shortDescription"
    [formGroup]="shortDescriptionForm">
    <app-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label appLabel="shortDescription"></mat-label>
        <textarea matInput formControlName="shortDescription" rows="5">
        </textarea>
      </mat-form-field>
    </app-row>
  </app-form-step>

  <app-form-step titleLabel="additionalInfo" [formGroup]="additionalInfoForm">
    <app-row columns="2">
      <mat-radio-group formControlName="selectedType">
        <mat-radio-button
          color="primary"
          value="offer"
          [checked]="this.additionalInfoForm.value.selectedType === 'offer'">
          <span appLabel="offer"></span>
        </mat-radio-button>
        <mat-radio-button
          color="primary"
          value="request"
          [checked]="this.additionalInfoForm.value.selectedType === 'request'">
          <span appLabel="request"></span>
        </mat-radio-button>
      </mat-radio-group>
    </app-row>

    <app-row columns="8">
      <mat-form-field appearance="outline">
        <mat-label appLabel="price"></mat-label>
        <input formControlName="price" matInput placeholder="&euro;" />
      </mat-form-field>
    </app-row>

    <app-row>
      <div>
        <span appLabel="dealIsPublic"></span>
        <mat-slide-toggle color="primary" formControlName="isPublic">
        </mat-slide-toggle>
      </div>
    </app-row>
  </app-form-step>
</app-form-stepper>
