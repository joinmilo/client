<cin-page-title
  [titleLabel]="contentForm.value.id ? 'editArticle' : 'createNewArticle'">
</cin-page-title>

<cin-form-stepper (cancelled)="cancelled()" (saved)="saved()">
  <cin-form-step titleLabel="content" [formGroup]="contentForm">
    <cin-grid-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label i18nLabel="name"></mat-label>
        <input matInput formControlName="name">
      </mat-form-field>
    </cin-grid-row>

    <cin-grid-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label i18nLabel="category"></mat-label>
        <mat-select formControlName="categoryId">
          <mat-option [value]="category.id"
            *ngFor="let category of categories | async">
              {{category | translatable: "name" | async}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </cin-grid-row>

    <cin-grid-row columns="1">
      <cin-richtext-editor-form
        formControlName="content">
      </cin-richtext-editor-form>
    </cin-grid-row>
  </cin-form-step>

  <cin-form-step titleLabel="media" [formGroup]="uploadsForm">
    <cin-media-form 
      [cardToggle]="true" 
      [titleToggle]="true" 
      formControlName="uploads">
    </cin-media-form>
  </cin-form-step>

  <cin-form-step titleLabel="shortDescription" [formGroup]="shortDescriptionForm">
    <cin-grid-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label i18nLabel="shortDescription"></mat-label>
        <textarea matInput formControlName="shortDescription" rows="5"></textarea>
      </mat-form-field>
    </cin-grid-row>
  </cin-form-step>

  <cin-form-step titleLabel="additionalInfo"
    [formGroup]="additionalInfoForm">
    <cin-grid-row columns="1">
      <div>
        <span i18nLabel="commentsAllowed"></span>
        <mat-slide-toggle color="primary" formControlName="commentsAllowed">
        </mat-slide-toggle>
      </div>
    </cin-grid-row>

    <cin-grid-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label i18nLabel="metaDescription"></mat-label>
        <textarea matInput formControlName="metaDescription" rows="5">
        </textarea>
      </mat-form-field>
    </cin-grid-row>
  </cin-form-step>

</cin-form-stepper>