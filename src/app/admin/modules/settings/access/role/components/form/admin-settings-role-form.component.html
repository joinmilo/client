<app-page-title [titleLabel]="form.value.id ? 'editRole' : 'createNewRole'">
</app-page-title>

<app-form-stepper (cancelled)="cancelled()" (saved)="saved()">
  <app-form-step titleLabel="role" [formGroup]="form">
    <app-row columns="2">
      <mat-form-field appearance="outline">
        <mat-label appLabel="name"></mat-label>
        <input matInput formControlName="name">
      </mat-form-field>
    </app-row>

    <app-row>
      <mat-form-field appearance="outline">
        <mat-label appLabel="privileges"></mat-label>
        <mat-select formControlName="privileges" multiple>
          <mat-option [value]="privilege.id"
            *ngFor="let privilege of privileges | async">
              <span>{{ privilege | translatable: "name" | async }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </app-row>

    <!-- TODO: use User selection popup with nice search -->
    <app-row>
      <mat-form-field appearance="outline">
        <mat-label appLabel="users"></mat-label>
        <mat-select formControlName="users" multiple>
          <mat-option [value]="user.id"
            *ngFor="let user of users | async">
              <span>{{ user.firstName }} {{ user.lastName}}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </app-row>
  </app-form-step>
</app-form-stepper>